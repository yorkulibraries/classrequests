
<h1><%= @greetings %></h1>
<hr class='primary'></hr>


<div class='card mb-3 shadow p-2 rounded'>
  <div class='card-body'>
    <h2 class='card-title'><%= t(:i_would_like_to) %>: </h2>
    <hr class='secondary'></hr>
    <a href="<%= new_user_teaching_request_path %>" class='btn btn-success' > <%= t(:request_library_class) %> </a>
  </div>
</div>

<% if @new_teaching_requests.count != 0 %>
<div class='section-list-wrapper card mb-3 shadow p-2 rounded'>
  <div class='card-body'>
    <h2 class='card-title'><%= t(:your_teaching_requests) %></h2>
    <div class='table-responsive'>
      <table class='table table-sm table-striped table-hover text-center'>
        <thead>
          <th class='small'><%= t(:request_info) %></th>
          <th class='small'><%= t(:preferred_date_and_duration) %></th>
          <th class='small'><%= t(:location) %></th>
          <th class='small'><%= t(:status) %></th>
          <th class='small'><%= t(:lead_instructor) %></th>
          <th colspan="2" style="min-width: 120px"><%= t(:options) %></th>
        </thead>
        <tbody>
          <% @new_teaching_requests.each do |request| %>
          <tr>
            <%= render partial: 'shared/teaching_request/common_table_fields', locals: {request: request} %>
            <td colspan='2' class='align-middle'>
              <%= link_to user_teaching_request_path(request), class: 'btn btn-sm btn-info mt-1 mb-1' do %>
                  <i class='fa fa-eye' data-bs-toggle='tooltip' data-bs-placement='left' title='<%= t(:view) %>'></i>
              <% end %>
              <%= link_to new_user_cancel_request_path(teaching_request_id: request, user_id: current_user.id), class: 'btn btn-sm btn-danger mt-1 mb-1' do %>
                  <i class='fas fa-times-circle' data-bs-toggle='tooltip' data-bs-placement='right' title='<%= t(:cancel_request) %>'></i>
              <% end %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<% end %>

<div class='section-list-wrapper card mb-3 shadow p-2 rounded'>
  <div class='card-body'>
    <h2 class='card-title'><%= t(:upcoming_classes) %></h2>
    <% if @upcoming_teaching_requests.count == 0 %>
      <h3 class='text-muted fs-4 fw-normal ms-2'><%= t(:there_are_no_assigned_requests) %></h3>
    <% else %>
    <div class='table-responsive'>
      <table class='table table-striped table-hover text-center'>
        <thead>
          <th class='small'><%= t(:request_info) %></th>
          <th class='small'><%= t(:preferred_date_and_duration) %></th>
          <th class='small'><%= t(:location) %></th>
          <th class='small'><%= t(:status) %></th>
          <th class='small'><%= t(:lead_instructor) %></th>
          <th colspan="2" style="min-width: 120px"><%= t(:options) %></th>
        </thead>
        <tbody>
        <% @upcoming_teaching_requests.each do |up_request| %>
          <tr>
            <%= render partial: 'shared/teaching_request/common_table_fields', locals: {request: up_request} %>

            <td colspan='2' class='align-middle'>
              <%= link_to user_teaching_request_path(up_request), class: 'btn btn-sm btn-info mt-1 mb-1' do %>
                  <i class='fa fa-eye' data-bs-toggle='tooltip' data-bs-placement='right' title='<%= t(:view) %>'></i>
                  <!-- <%= t(:details) %> -->
              <% end %>
              <%= link_to new_user_cancel_request_path(teaching_request_id: request, user_id: current_user.id), class: 'btn btn-sm btn-danger mt-1 mb-1' do %>
                  <i class='fas fa-times-circle' data-bs-toggle='tooltip' data-bs-placement='right' title='<%= t(:cancel_request) %>'></i>
              <% end %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <% end %>
  </div>
</div> <!-- Upcoming Requests wrapper -->

<div class='section-list-wrapper card mb-3 shadow p-2 rounded'>
  <div class='card-body'>
    <h2 class='card-title'><%= t(:past_classes) %>
      <small class='text-muted fs-6 fw-normal'><%= t(:in_the_past_90_days) %></small>
    </h2>

    <% if @past_teaching_requests.count == 0 || @past_teaching_requests != nil %>
      <h3 class='text-muted fs-4 fw-normal ms-2'><%= t(:there_are_no_past_requests) %></h3>
    <% else %>
    <div class='table-responsive'>
      <table class='table table-striped table-hover text-center'>
        <thead>
          <th class='small'><%= t(:request_info) %></th>
          <th class='small'><%= t(:preferred_date_and_duration) %></th>
          <th class='small'><%= t(:location) %></th>
          <th class='small'><%= t(:status) %></th>
          <th class='small'><%= t(:lead_instructor) %></th>
          <th colspan="2" style="min-width: 120px"><%= t(:options) %></th>
        </thead>
        <tbody>
        <% @past_teaching_requests.each do |past_request| %>
          <tr>
            <%= render partial: 'shared/teaching_request/common_table_fields', locals: {request: past_request} %>
            <td colspan='2' class='align-middle'>
              <%= link_to user_teaching_request_path(past_request), class: 'btn btn-sm btn-info mt-1 mb-1' do %>
                  <i class='fa fa-eye' data-bs-toggle='tooltip' data-bs-placement='right' title='<%= t(:view) %>'></i>
              <% end %>
              <%= link_to new_user_cancel_request_path(teaching_request_id: request, user_id: current_user.id), class: 'btn btn-sm btn-danger mt-1 mb-1' do %>
                  <i class='fas fa-times-circle' data-bs-toggle='tooltip' data-bs-placement='right' title='<%= t(:cancel_request) %>'></i>
              <% end %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <% end %>
  </div>
</div> <!-- Past Requests wrapper -->
